{"version":3,"sources":["webpack:///./src/views/Repos/Import.vue?2d96","webpack:///./src/views/Repos/Import.vue","webpack:///src/views/Repos/Import.vue","webpack:///./src/views/Repos/Import.vue?9334","webpack:///./src/views/Repos/Import.vue?c655"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","$t","staticRenderFns","components","Loader","computed","_objectSpread","title","mapState","mapGetters","url","decodeURIComponent","$route","query","isDeviceNotLinked","configLoaded","isDeviceLinked","watch","immediate","handler","newValue","$router","replace","name","params","message","link","linkText","methods","validateURL","URL","_unused","import","_this","$api","addRepo","then","response","success","concat","data","id","catch","errors","translated","created","component"],"mappings":"yIAAA,W,yCCAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACJ,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,4BAA4BL,EAAG,WAAW,IAErKM,EAAkB,G,owCCSP,OACfC,WAAA,CACAC,eAEAC,SAAAC,MAAA,CACAC,MAAA,WACA,YAAAN,GAAA,0BAEAO,eAAA,mBACAC,eAAA,yBACAC,IAAA,WACA,OAAAC,mBAAA,KAAAC,OAAAC,MAAAH,MAEAI,kBAAA,WACA,YAAAC,eAAA,KAAAC,kBAGAC,MAAA,CACAH,kBAAA,CACAI,WAAA,EACAC,QAAA,SAAAC,GACAA,GAIA,KAAAC,QAAAC,QAAA,CACAC,KAAA,QACAC,OAAA,CACAC,QAAA,mBACAC,KAAA,QACAC,SAAA,KAAA1B,GAAA,yBAMA2B,QAAA,CACAC,YAAA,WACA,IAGA,OADA,IAAAC,IAAA,KAAApB,MACA,EACA,MAAAqB,GASA,OARA,KAAAV,QAAAC,QAAA,CACAC,KAAA,QACAC,OAAA,CACAC,QAAA,oBACAC,KAAA,YACAC,SAAA,sBAGA,IAGAK,OAAA,eAAAC,EAAA,KACA,KAAAC,KAAAC,QAAA,KAAAzB,KACA0B,MAAA,SAAAC,GACA,IAAAA,EAAAC,QACA,MAAAD,EAGAJ,EAAAZ,QAAAC,QAAA,UAAAiB,OAAAF,EAAAG,KAAAC,QAEAC,OAAA,SAAAL,GACAJ,EAAAZ,QAAAC,QAAA,CACAC,KAAA,QACAC,OAAA,CACAC,QAAAY,EAAAM,OAAA,GAAAC,WACAlB,KAAA,YACAC,SAAA,0BAMAkB,QAAA,WACA,KAAAhB,eACA,KAAAG,WCxF8V,I,wBCQ1Vc,EAAY,eACd,EACArD,EACAS,GACA,EACA,KACA,WACA,MAIa,aAAA4C,E","file":"js/chunk-866612fe.ff61a2c3.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=style&index=0&id=b44830f0&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$t('IMPORTING_REPOSITORY')))]),_c('loader')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <p class=\"text\">{{ $t('IMPORTING_REPOSITORY') }}</p>\n    <loader></loader>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport Loader from '@/components/Loader.vue';\n\nexport default {\n  components: {\n    Loader,\n  },\n  computed: {\n    title() {\n      return this.$t('IMPORTING_REPOSITORY');\n    },\n    ...mapState(['configLoaded']),\n    ...mapGetters(['isDeviceLinked']),\n    url() {\n      return decodeURIComponent(this.$route.query.url);\n    },\n    isDeviceNotLinked() {\n      return this.configLoaded && !this.isDeviceLinked;\n    },\n  },\n  watch: {\n    isDeviceNotLinked: {\n      immediate: true,\n      handler(newValue) {\n        if (!newValue) {\n          return;\n        }\n\n        this.$router.replace({\n          name: 'error',\n          params: {\n            message: 'NO_DEVICE_LINKED',\n            link: '/link',\n            linkText: this.$t('GO_TO_LINK_PAGE'),\n          },\n        });\n      },\n    },\n  },\n  methods: {\n    validateURL() {\n      try {\n        // eslint-disable-next-line no-new\n        new URL(this.url);\n        return true;\n      } catch {\n        this.$router.replace({\n          name: 'error',\n          params: {\n            message: 'PROVIDE_VALID_URL',\n            link: '/my/repos',\n            linkText: 'MY_REPOSITORIES',\n          },\n        });\n        return false;\n      }\n    },\n    import() {\n      this.$api.addRepo(this.url)\n        .then((response) => {\n          if (!response.success) {\n            throw response;\n          }\n\n          this.$router.replace(`/repos/${response.data.id}`);\n        })\n        .catch((response) => {\n          this.$router.replace({\n            name: 'error',\n            params: {\n              message: response.errors[0].translated,\n              link: '/my/repos',\n              linkText: 'MY_REPOSITORIES',\n            },\n          });\n        });\n    },\n  },\n  created() {\n    if (this.validateURL()) {\n      this.import();\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.text {\n  text-align: center;\n  font-size: 16px;\n  font-weight: bold;\n  margin-bottom: 20px;\n  padding: 0 15px;\n  line-height: 24px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Import.vue?vue&type=template&id=b44830f0&scoped=true\"\nimport script from \"./Import.vue?vue&type=script&lang=js\"\nexport * from \"./Import.vue?vue&type=script&lang=js\"\nimport style0 from \"./Import.vue?vue&type=style&index=0&id=b44830f0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b44830f0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}